<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>Modelling with TypeScript</title>
  <meta charset="UTF-8" />
  <meta name="theme-color" content="#354F52">
  <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/tag/latest/ui-shell.min.js"></script>
  <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/tag/latest/button.min.js"></script>
  <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/tag/latest/tag.min.js"></script>
  <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/tag/latest/notification.min.js"></script>
  

  <link rel="icon" href="https://blog.cloudant.com/favicon.png">

  

<link rel="stylesheet"
href="https://1.www.s81c.com/common/carbon-for-ibm-dotcom/tag/v1/canary/plex.css"/>
<link rel="stylesheet"
href="https://1.www.s81c.com/common/carbon-for-ibm-dotcom/tag/v1/canary/grid.css"/>

<style>
       
bx-header~bx-side-nav{margin-top:3rem;height:calc(100% - 3rem)}
.bx-hugo-carbon--ui-shell-content{
  will-change:margin-left;transition:margin-left .11s cubic-bezier(0.2, 0, 1, 0.9);
}
#main-content {margin-top: 3rem;}

@media(min-width: 66rem){

  #main-content{margin-left:16rem}

}
html {margin:0; font-family: "IBM Plex Sans", "Helvetica Neue", Arial, sans-serif;}
bx-side-nav {top:3rem; display: block; overflow: scroll;}
bx-header {display:flex; background: #000;color:#fff;height: 3rem;width:100%}
</style>


<link rel="stylesheet" type="text/css" href="https://blog.cloudant.com/css/main.css?i=000" media="all">



 




 <meta name="generator" content="Hugo 0.115.0">

  
    
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Modelling with TypeScript">
    <meta property="og:url" content="https://blog.cloudant.com/2018/06/29/Modelling-Cloudant-Data-in-TypeScript.html" />
    <meta property="og:description" content="Making TypeScript objects to store in Cloudant" />
    <meta property="article:published_time" content="2018-06-29 06:00:00 &#43;0000 UTC" />
    <meta property="og:site_name" content="Cloudant blog" />
    <meta property="og:image" content="/img/swapnil-dwivedi-246205-unsplash.jpg" />

    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="Cloudant blog" />
    <meta name="twitter:title" content="Modelling with TypeScript" />
    <meta name="twitter:description" content="Making TypeScript objects to store in Cloudant" />
    <meta name="twitter:creator" content="Cloudant blog" />

    
    <meta itemprop="name" content="Modelling with TypeScript">
    <meta itemprop="description" content="Making TypeScript objects to store in Cloudant">
    <meta itemprop="image" content="/img/swapnil-dwivedi-246205-unsplash.jpg">
  




  
  <style>
@media (min-width: 66rem) {
.container .bx--grid {
  padding-left: calc(25% + 1.5rem);
  padding-right: 2rem;
}
}
    h3 {
      margin-bottom: 1rem;
    }
  </style>
  </head>
<body class="">
     
<bx-skip-to-content href="#main-content" role="navigation" aria-label="Skip to main content"></bx-skip-to-content>
<bx-header aria-label=" Cloudant blog" role="banner">
  <bx-header-name href="https://blog.cloudant.com/" prefix=""> Cloudant blog</bx-header-name>
  <bx-header-nav menu-bar-label=" Cloudant blog" role="navigation">
    
        
          
            <bx-header-nav-item active="" href="https://blog.cloudant.com/">Home</bx-header-nav-item>
          
        
          
            <bx-header-nav-item active="" href="https://blog.cloudant.com/search.html">Search</bx-header-nav-item>
          
        
    
  </bx-header-nav>
</bx-header>
<div style="height:50px"></div>
<main class="bx--content bx-hugo-carbon--ui-shell-content">
  <div class="bx--grid">
    <div class="bx--row">


<div class="bx--col-sm-12 bx--col-md-12 bx--col-lg-12  bx--col-xlg-12 bx--col-max-12">
  <h1 class="p-name">Modelling with TypeScript</h1>
  
  <div class="postmeta">Jun 29, 2018 | Glynn Bird | 

  
  <bx-tag>TypeScript</bx-tag>
  
  <bx-tag>Modelling</bx-tag>
  


  </div>
  
  <p><a href="https://www.typescriptlang.org/">TypeScript</a> is a programming language that is a super-set of JavaScript written by Microsoft. TypeScript code compiles to various flavours of JavaScript to run in the browser, in Node.js or in concert with frameworks such as React, Angular, Vue.js etc. Programming in TypeScript brings you the luxury of:</p>
<ul>
<li>type checking for function parameters, return values etc</li>
<li>default and optional values for function parameters</li>
<li>interfaces, for defining the shape of objects being passed in and out of functions</li>
<li>classes with constructors, inheritance &amp; access modifiers</li>
<li>enumerations</li>
<li>iterators</li>
<li>module import/export</li>
<li>and lots more</li>
</ul>
<p>Ultimately your TypeScript code is transpiled into JavaScript, targetted for your destination platform, so it can&rsquo;t <em>do</em> any more than JavaScript. The advantage of TypeScript code is that you get to apply greater rigour in your code, have access to lots of &ldquo;grown up&rdquo; programming features and a receive lots of help in the code editor.</p>
<p><img src="https://blog.cloudant.com/img/typescript0.png" alt="typescript0"></p>
<p>In the above example, the red line indicates that there is no &lsquo;postcode&rsquo; property of the <code>Address</code> class. Catching mistakes like this in the editor saves lots of time later, chasing down errors and figuring out why the code isn&rsquo;t doing what is expected.</p>
<p>Typescript is <a href="https://github.com/Microsoft/TypeScript">open-sourced</a> and Microsoft&rsquo;s popular <a href="https://code.visualstudio.com/">VS Code</a> editor is itself written in TypeScript!</p>
<h2 id="data-modelling-with-cloudant"style="display:inline">Data modelling with Cloudant</h2><a class="stealth" href="#data-modelling-with-cloudant">ðŸ”—</a><br>
<p>Let&rsquo;s say we want to store employee records in Cloudant. As Cloudant stores JSON objects, we can use plain JavaScript objects in our code that are transformed to JSON with <code>JSON.stringify</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Glynn&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">joined</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1529060008135</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">address</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">street</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;15 Front Street&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">city</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Coketown&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">state</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Yorkshire&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">zip</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;N1 2BX&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">lat</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">52.1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">long</span><span style="color:#f92672">:</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1.5</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">employeeCode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;101-5523&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;tech&#34;</span>,<span style="color:#e6db74">&#34;uk&#34;</span>]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>To take advantage of the features of TypeScript, it would be better if we could use classes instead of generic objects. We could build:</p>
<ul>
<li>a Date object to represent the time the employee joined.</li>
<li>an Address object with custom methods that formats address labels.</li>
<li>a TagsCollection object with methods that allow new tags to be added and prevents duplicates.</li>
</ul>
<p><img src="https://blog.cloudant.com/img/swapnil-dwivedi-246205-unsplash.jpg" alt="modelling"></p>
<p>Ideally, an <em>Employee</em> class containing these building-block classes would have a usuable JSON representation that could be stored in Cloudant. In addtion, the JSON string could be returned to a concrete class after retrieving data from the database.</p>
<p>There is a solution to this, so let&rsquo;s start with a custom <em>Address</em> class.</p>
<h2 id="address-class"style="display:inline">Address class</h2><a class="stealth" href="#address-class">ðŸ”—</a><br>
<p>We can create a custom TypeScript class that embodies a postal address and geo-location:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// Address.ts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// the iAddress Interface - the shape of an address object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">iAddress</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">street</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">town</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">state</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">zip</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">lat</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">long</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// the Address class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Address</span> <span style="color:#66d9ef">implements</span> <span style="color:#a6e22e">iAddress</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">street</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">town</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">state</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">zip</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">lat</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">long</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">type</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Address&#39;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// return an address label string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">getLabel</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> [<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">street</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">town</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">state</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">zip</span>].<span style="color:#a6e22e">join</span>(<span style="color:#e6db74">&#39;, &#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// turn an object into an Address
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">fromObject</span>(<span style="color:#a6e22e">a</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">iAddress</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Address</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Address</span>()
</span></span><span style="display:flex;"><span>    Object.<span style="color:#a6e22e">assign</span>(<span style="color:#a6e22e">obj</span>, <span style="color:#a6e22e">a</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">obj</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>It&rsquo;s worth explaining that <a href="https://www.typescriptlang.org/docs/handbook/interfaces.html">TypeScript Interfaces</a> define the <em>forms of objects</em> - the attributes and types that make up an object. They are useful when defining functions that take objects as parameters - this allows the TypeScript compiler to check the form of the object at compile-time and allows your editor to check your code as you type.</p>
<p>This <em>Address</em> object is pretty simple. It has a number of public attributes that define the address, a <code>getLabel</code> function that returns a postage label and a static <code>fromObject</code> function that can resurrect an Address object from a generic object that conforms to the <em>iAddress</em> interface.</p>
<p>A simple class like <em>Address</em> that only uses JavaScript primitive types turns into a sensible form of JSON - an object which looks like the <em>iAddress</em> interface:</p>
<p><img src="https://blog.cloudant.com/img/typescript1.png" alt="typescript1"></p>
<p>We&rsquo;ll see how to incorporate this into our <em>Employee</em> class later, but first let&rsquo;s look at how we can use a similar technique to model a date.</p>
<h2 id="the-cloudantdate-class"style="display:inline">The CloudantDate class</h2><a class="stealth" href="#the-cloudantdate-class">ðŸ”—</a><br>
<p>In <a href="https://medium.com/@glynn_bird/date-formats-for-apache-couchdb-and-cloudant-1c017b7b878b">this blog post</a>, I discussed various ways of representing a date/time in Cloudant JSON. I concluded that it&rsquo;s good to have the constituent date/time parts (day, month, year) present in the object to allow <a href="https://console.bluemix.net/docs/services/Cloudant/api/cloudant_query.html#query">Cloudant Query</a> to access them and a &ldquo;seconds since 1970&rdquo; integer or an ISO-8601 string for sorting purposes.</p>
<p>To represent a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">JavaScript Date</a> object in our <em>Employee</em> class, we&rsquo;re going to create a wrapper class called <em>CloudantDate</em> which has a trick up its sleeve:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// CloudantDate.ts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// the iCloudantDate interface - the shape the object 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">iCloudantDate</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">year</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">month</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">day</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">hour</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">minute</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">second</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">millisecond</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ts</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// the CloudantDate class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CloudantDate</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">d</span><span style="color:#f92672">:</span> Date
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// if a date is supplied, it is used, otherwise &#39;now&#39; is used
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">c</span><span style="color:#f92672">?:</span> <span style="color:#a6e22e">any</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">d</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">new</span> Date(<span style="color:#a6e22e">c</span>) <span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span> Date()
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// override toJSON to provide a custon JSON representation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">toJSON</span>()<span style="color:#f92672">:</span> <span style="color:#a6e22e">iCloudantDate</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;CloudantDate&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">year</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getUTCFullYear</span>(),
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">month</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getUTCMonth</span>() <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">day</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getUTCDate</span>(),
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">hour</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getUTCHours</span>(),
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">minute</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getUTCMinutes</span>(),
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">second</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getUTCSeconds</span>(),
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">millisecond</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getUTCMilliseconds</span>(),
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">ts</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">getTime</span>()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// convert an object to a CloudantDate (only the &#39;ts&#39; is used)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">fromObject</span>(<span style="color:#a6e22e">o</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">iCloudantDate</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">CloudantDate</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">CloudantDate</span>(<span style="color:#a6e22e">o</span>.<span style="color:#a6e22e">ts</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The <em>CloudantDate</em> class stores its value in a standard JavaScript <em>Date</em> class and like <em>Address</em>, implements a static <code>fromObject</code> function to allow a class to be reconstituted from an plain object. <em>CloudantDate</em>&rsquo;s real party piece is overridng the <code>toJSON</code> function, which is used by <code>JSON.stringify</code> to turn an instance of the class into JSON.</p>
<p>If we create a <em>CloudantDate</em> object and <code>JSON.stringify</code> it, the resultant string contains all the date and time pieces broken out:</p>
<p><img src="https://blog.cloudant.com/img/typescript2.png" alt="typescript1"></p>
<p>This allows us to have dates that are useable <code>Date</code> classes in our code and have the constituent parts broken down in the Cloudant database, where they are accessible to the Cloudant indexing engine.</p>
<h2 id="tagcollection-class"style="display:inline">TagCollection class</h2><a class="stealth" href="#tagcollection-class">ðŸ”—</a><br>
<p>Our final storage class is <em>TagCollection</em> which stores an array of strings. It has a couple of helper functions (<code>add</code> and <code>remove</code>) and also overrides the <code>toJSON</code> function to ensure that only an array of strings appears in the JSON:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// TagCollection.ts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// TagCollection class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TagCollection</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>[]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">constructor</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">clear</span>()
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// wipe all tags
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">clear</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tags</span> <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// add a tag (with de-dupe)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">s</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>)<span style="color:#f92672">:</span><span style="color:#66d9ef">boolean</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tags</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">s</span>) <span style="color:#f92672">===</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tags</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">s</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// remove a tag
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">remove</span>(<span style="color:#a6e22e">s</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>)<span style="color:#f92672">:</span><span style="color:#66d9ef">boolean</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tags</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">s</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tags</span>.<span style="color:#a6e22e">splice</span>(<span style="color:#a6e22e">i</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// override toJSON to only output the tags array
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">toJSON</span>()<span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>[] {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tags</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// reconstitue 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">fromObject</span>(<span style="color:#a6e22e">t</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>[])<span style="color:#f92672">:</span> <span style="color:#a6e22e">TagCollection</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">tc</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TagCollection</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tc</span>.<span style="color:#a6e22e">tags</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">t</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">tc</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><img src="https://blog.cloudant.com/img/typescript3.png" alt="typescript3"></p>
<h2 id="assembling-the-employee-class"style="display:inline">Assembling the Employee class</h2><a class="stealth" href="#assembling-the-employee-class">ðŸ”—</a><br>
<p>Now we have all the pieces in place, we can create a top level &ldquo;Employee&rdquo; class that uses our custom classes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// Employee.ts
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Address</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./Address&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">CloudantDate</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./CloudantDate&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">CloudantDocument</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./CloudantDocument&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">TagCollection</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./TagCollection&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// the Employee class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Employee</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">CloudantDocument</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> String
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">employeeCode</span><span style="color:#f92672">:</span> String
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">salary</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">joined</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">CloudantDate</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">address</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Address</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tags</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">TagCollection</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> String, <span style="color:#a6e22e">address</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Address</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">super</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">joined</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">CloudantDate</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">address</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">address</span>
</span></span><span style="display:flex;"><span>  } 
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// convert plain object to Employee
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">fromObject</span>(<span style="color:#a6e22e">parsed</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Employee</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Employee</span>(<span style="color:#a6e22e">parsed</span>.<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">parsed</span>.<span style="color:#a6e22e">address</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">_id</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">parsed</span>.<span style="color:#a6e22e">_id</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">_rev</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">parsed</span>.<span style="color:#a6e22e">_rev</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">joined</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">CloudantDate</span>.<span style="color:#a6e22e">fromObject</span>(<span style="color:#a6e22e">parsed</span>.<span style="color:#a6e22e">joined</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">address</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Address</span>.<span style="color:#a6e22e">fromObject</span>(<span style="color:#a6e22e">parsed</span>.<span style="color:#a6e22e">address</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">tags</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">TagCollection</span>.<span style="color:#a6e22e">fromObject</span>(<span style="color:#a6e22e">parsed</span>.<span style="color:#a6e22e">tags</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">employeeCode</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">parsed</span>.<span style="color:#a6e22e">employeeCode</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">obj</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// parse JSON and then convert to Employee
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">fromJSON</span>(<span style="color:#a6e22e">json</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Employee</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">parsed</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">json</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Employee</span>.<span style="color:#a6e22e">fromObject</span>(<span style="color:#a6e22e">parsed</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We have a base class that handles the Cloudant-specific fields (<code>_id</code>, <code>_rev</code> etc) which we can reuse across all of our Cloudant storage classes:</p>
<pre tabindex="0"><code>// CloudantDocument.ts

import * as uuid from &#39;uuid&#39;

export interface CloudantAPIResponse {
  ok: boolean
  id: string
  rev: string
}

export class CloudantDocument {
  _id: string
  _rev: string
  _deleted: boolean
  _attachments: object

  constructor() {
    this.clear()
  }

  private clear() {
    this._id = undefined
    this._rev = undefined
    this._deleted = undefined
    this._attachments = undefined
  }

  generateId() {
    this.clear()
    this._id = uuid.v4()
  }

  processAPIResponse(response: APIResponse) {
    if (response.ok === true) {
      this._id = response.id
      this._rev = response.rev
    }
  }
}
</code></pre><p>We can then use the <em>Employee</em> class in our own code and pass instances of <em>Employee</em> to the <a href="https://www.npmjs.com/package/@cloudant/cloudant">official Node.js Cloudant library</a> to be stored in the database:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Employee</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./Employee&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Address</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./Address&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">TagCollection</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./TagCollection&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">Cloudant</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;@cloudant/cloudant&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// make an address object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Address</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">street</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;19 Front Street&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">town</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Coketown&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">state</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Lancashire&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">zip</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;L1 6GC&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">lat</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">52.56</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">a</span>.<span style="color:#66d9ef">long</span> <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">2.7</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// create employee
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">newEmployee</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Employee</span>(<span style="color:#e6db74">&#39;Glynn&#39;</span>, <span style="color:#a6e22e">a</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">newEmployee</span>.<span style="color:#a6e22e">generateId</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">newEmployee</span>.<span style="color:#a6e22e">employeeCode</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;101-5523&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// tags
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">newEmployee</span>.<span style="color:#a6e22e">tags</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TagCollection</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">newEmployee</span>.<span style="color:#a6e22e">tags</span>.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#39;engineering&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">newEmployee</span>.<span style="color:#a6e22e">tags</span>.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#39;cloudant&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// initialise Cloudant library
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">client</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Cloudant</span>(<span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">CLOUDANT_URL</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">db</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">use</span>(<span style="color:#e6db74">&#39;employees&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">insert</span>(<span style="color:#a6e22e">newEmployee</span>, (<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">newEmployee</span>.<span style="color:#a6e22e">processAPIResponse</span>(<span style="color:#a6e22e">data</span>)
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p>The Cloudant library converts the our custom object to JSON, which invokes our custom <code>toJSON</code> overrides:</p>
<p><img src="https://blog.cloudant.com/img/typescript4.png" alt="typescript4"></p>
<p>The Cloudant document can be restored into an <em>Employee</em> class later, if we use our static <code>Employee.fromObject</code> method to reconstitute the class from its JSON form:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">client</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Cloudant</span>(<span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">CLOUDANT_URL</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">db</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">use</span>(<span style="color:#e6db74">&#39;employees&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">e</span><span style="color:#f92672">:</span><span style="color:#a6e22e">Employee</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">db</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;0ef9a2bd-e738-43bb-9bb6-06385e5ac541&#39;</span>, (<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">e</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Employee</span>.<span style="color:#a6e22e">fromObject</span>(<span style="color:#a6e22e">data</span>)
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><h2 id="typescript-conclusions"style="display:inline">Typescript conclusions</h2><a class="stealth" href="#typescript-conclusions">ðŸ”—</a><br>
<p>Writing in TypeScript adds some of the rigour of writing Java code to JavaScript, including strong typing and classes with inheritance &amp; access control. This allows the developer to build neat, consistent code with the code editor advising at every turn. TypeScript is transpiled, whether your target is a minified package for a web app, a server-side Node.js module or a native Electron app.</p>
<p>Overriding the <code>toJSON</code> function in your custom TypeScript classes allows you to use classes in your code and pass them to the Cloudant Node.js library to be saved in a form of JSON of your choice.</p>

</div>
</div>
</div>
</main>

Syndicated from: <a href="https://medium.com/@glynn_bird/modelling-cloudant-data-in-typescript-b95da651e9a7" target="_new">https://medium.com/@glynn_bird/modelling-cloudant-data-in-typescript-b95da651e9a7</a>



</body>
</html>

